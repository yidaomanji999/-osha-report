<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <title>呼伦贝尔市通源检验检测有限责任公司报告公示</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;margin:0;padding:2rem;background:#f5f5f5;color:#333}
    h1{text-align:center;margin-bottom:1rem}
    .search-box{width:100%;max-width:400px;margin:0 auto 1.5rem;display:block;padding:.6rem 1rem;font-size:1rem;border:1px solid #ccc;border-radius:4px}
    ul{list-style:none;padding:0;margin:0 auto;max-width:800px}
    li{background:#fff;margin:.5rem 0;padding:.75rem 1rem;border-radius:4px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 1px 3px rgba(0,0,0,.1)}
    li a{text-decoration:none;color:#0969da;font-weight:500}
    li span{color:#666;font-size:.875rem}
    .no-result{text-align:center;color:#999;margin-top:2rem}
  </style>
</head>
<body>
  <h1>呼伦贝尔市通源检验检测有限责任公司检测报告公示栏</h1>
  <input class="search-box" id="search" placeholder="输入报告编号或企业名称搜索" type="search">
  <ul id="list"></ul>
  <div class="no-result" id="noResult" style="display:none">未找到相关报告</div>

  <script>
    // 1. 自动扫描 /pdf 目录下的文件（GitHub Pages 允许用 files 列表接口）
    fetch('https://api.github.com/repos/yidaomanji999/-osha-report/contents/pdf')
      .then(r=>r.json())
      .then(data=>{
        if(!Array.isArray(data)) throw 0;
        const arr=data.map(f=>({name:f.name,url:f.download_url}));
        render(arr);
        document.getElementById('search').addEventListener('input',e=>{
          const kw=e.target.value.trim().toLowerCase();
          render(arr.filter(item=>item.name.toLowerCase().includes(kw)));
        });
      })
      .catch(()=>{
        // 如果 /pdf 目录不存在就提示
        document.getElementById('list').innerHTML='<li>暂无报告，请管理员将 PDF 文件上传到 <code>/pdf</code> 文件夹</li>';
      });

    function render(list){
      const box=document.getElementById('list');
      const empty=document.getElementById('noResult');
      if(list.length){
        box.innerHTML=list.map(f=>`<li><a href="${f.url}" target="_blank">${f.name.replace(/\.pdf$/i,'')}</a><span>PDF</span></li>`).join('');
        empty.style.display='none';
      }else{
        box.innerHTML='';
        empty.style.display='block';
      }
    }
  </script>
</body>
</html>